# –õ–æ–∫–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–∑ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ (–±–µ–∑ VPN)

## üéØ –¶–µ–ª—å

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ç–æ—á–Ω–æ —Ç–µ –∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –∏–∑ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑–∞–ª–∏ –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (hybrid —Ä–µ–∂–∏–º, 0.778 —Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª), –Ω–æ **–ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ** —Å Ollama.

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

- ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ** - –Ω–∏–∫–∞–∫–∏—Ö API –∫–ª—é—á–µ–π
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ VPN** - –≤—Å–µ –º–æ–¥–µ–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ
- ‚úÖ **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å** - –¥–∞–Ω–Ω—ã–µ –Ω–µ —É—Ö–æ–¥—è—Ç –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- ‚úÖ **–¢–µ –∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

## üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞

- **–†–µ–∂–∏–º:** hybrid (–ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
- **LLM:** llama3.1:8b (Ollama) ‚úÖ
- **Embeddings:** intfloat/multilingual-e5-base (HuggingFace) ‚úÖ
- **RAGAS LLM:** llama3.1:8b (Ollama) ‚úÖ
- **RAGAS Embeddings:** intfloat/multilingual-e5-base (HuggingFace) ‚úÖ
- **Cross-encoder:** cross-encoder/mmarco-mMiniLMv2-L12-H384-v1 (HuggingFace) ‚úÖ

## üîß –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –º–æ–¥–µ–ª—å Ollama

–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å Ollama, –Ω–æ –Ω—É–∂–Ω–∞ –º–æ–¥–µ–ª—å `llama3.1:8b`:

```bash
ollama pull llama3.1:8b
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–æ–¥–µ–ª—å –∑–∞–Ω–∏–º–∞–µ—Ç ~4.7GB. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
ollama list
```

–î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ç—Ä–æ–∫–∞: `llama3.1:8b`

### 2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Ollama —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω

Ollama –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ñ–æ–Ω–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# Windows (PowerShell)
Get-Service -Name "Ollama" | Select-Object Status

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:
ollama list
```

–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ —Å–ª—É–∂–±—ã Windows.

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` —Ñ–∞–π–ª

–°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
OPENAI_API_KEY=ollama  # –º–æ–∂–Ω–æ –ª—é–±–æ–π, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è Ollama

# LLM –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Ollama - –∫–∞–∫ –≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–µ)
OPENAI_BASE_URL=http://localhost:11434/v1
LLM_MODEL=llama3.1:8b
LLM_PROVIDER=openai

# Embeddings (HuggingFace - –∫–∞–∫ –≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–µ)
EMBEDDINGS_PROVIDER=huggingface
EMBEDDINGS_MODEL=intfloat/multilingual-e5-base
HUGGINGFACE_DEVICE=cpu
HUGGINGFACE_NORMALIZE_EMBEDDINGS=true

# RAGAS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∫–∞–∫ –≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–µ)
RAGAS_EMBEDDINGS_PROVIDER=huggingface
RAGAS_EMBEDDING_MODEL=intfloat/multilingual-e5-base
RAGAS_LLM_MODEL=llama3.1:8b

# RAG —Ä–µ–∂–∏–º (hybrid - –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
RAG_MODE=hybrid
SEMANTIC_K=4
BM25_K=4
HYBRID_K=4

# Cross-encoder –¥–ª—è reranking (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ hybrid+reranker)
CROSSENCODER_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2
CROSSENCODER_PROVIDER=huggingface

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
SYSTEM_ROLE=–±–∞–Ω–∫–æ–≤—Å–∫–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
CONTEXT_TURNS=8
RETRIEVER_K=4
DATA_PATH=@data
LOG_LEVEL=INFO
SHOW_SOURCES=false
```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ï—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏:

```bash
make install
```

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
make run
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ HuggingFace –º–æ–¥–µ–ª–∏ –±—É–¥—É—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- `intfloat/multilingual-e5-base` (~500MB)
- `cross-encoder/ms-marco-MiniLM-L-6-v2` (~50MB)

–≠—Ç–æ –∑–∞–π–º–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç, –Ω–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑. –ü–æ—Å–ª–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

- **RAM:** –º–∏–Ω–∏–º—É–º 8GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 16GB)
  - Ollama llama3.1:8b: ~4-6GB RAM
  - HuggingFace embeddings: ~500MB RAM
  - –°–∏—Å—Ç–µ–º–∞ –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã: ~2GB RAM

- **–î–∏—Å–∫:** –º–∏–Ω–∏–º—É–º 10GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
  - Ollama –º–æ–¥–µ–ª—å: ~4.7GB
  - HuggingFace –º–æ–¥–µ–ª–∏: ~1GB
  - –ö—ç—à –∏ –¥–∞–Ω–Ω—ã–µ: ~1GB

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **CPU:** –ú–æ–¥–µ–ª–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ CPU (–µ—Å–ª–∏ –Ω–µ—Ç GPU)
- **–°–∫–æ—Ä–æ—Å—Ç—å:** –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 10-30 —Å–µ–∫—É–Ω–¥ (–∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π)
- **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã:** 2-5 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ—Ç–≤–µ—Ç

–ï—Å–ª–∏ –µ—Å—Ç—å GPU —Å CUDA, –º–æ–∂–Ω–æ —É—Å–∫–æ—Ä–∏—Ç—å:
```env
HUGGINGFACE_DEVICE=cuda
```

## üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞: `make run`
2. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: `–ó–∞–ø—É—Å–∫ Telegram-–±–æ—Ç–∞...`
3. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/index` –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
6. –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –±–æ—Ç—É

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Render

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –õ–æ–∫–∞–ª—å–Ω–æ (Ollama) | Render (Groq) |
|----------|-------------------|--------------|
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ ‚úÖ | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ ‚úÖ |
| **VPN** | –ù–µ –Ω—É–∂–µ–Ω ‚úÖ | –ù–µ –Ω—É–∂–µ–Ω ‚úÖ |
| **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å** | 100% ‚úÖ | –î–∞–Ω–Ω—ã–µ —É—Ö–æ–¥—è—Ç –≤ API |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç CPU/GPU | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ |
| **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** | –¢–æ—á–Ω—ã–µ –∏–∑ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ ‚úÖ | –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ |
| **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è** | –ù—É–∂–µ–Ω –º–æ—â–Ω—ã–π –ü–ö | –ù–µ –Ω—É–∂–µ–Ω –ü–ö |

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ï—Å–ª–∏ —É –≤–∞—Å —Å–ª–∞–±—ã–π –ü–ö:

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –ª–µ–≥–∫—É—é –º–æ–¥–µ–ª—å Ollama:
```bash
ollama pull llama3.2:3b
```

–ò –≤ `.env`:
```env
LLM_MODEL=llama3.2:3b
RAGAS_LLM_MODEL=llama3.2:3b
```

–ö–∞—á–µ—Å—Ç–≤–æ –±—É–¥–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –Ω–∏–∂–µ, –Ω–æ —Å–∫–æ—Ä–æ—Å—Ç—å –≤—ã—à–µ.

### –ï—Å–ª–∏ –µ—Å—Ç—å GPU:

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ CUDA –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```env
HUGGINGFACE_DEVICE=cuda
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä–∏—Ç —Ä–∞–±–æ—Ç—É embeddings.

## ‚ùì –ü—Ä–æ–±–ª–µ–º—ã?

### Ollama –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Ollama —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `ollama --version`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É Ollama –≤ Windows
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 11434 —Å–≤–æ–±–æ–¥–µ–Ω

### –ú–æ–¥–µ–ª—å –Ω–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑: `ollama pull llama3.1:8b`

### –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–∞–º—è—Ç–∏

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –ª–µ–≥–∫—É—é –º–æ–¥–µ–ª—å (llama3.2:3b)
2. –ó–∞–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –ª–µ–≥–∫–∏–µ embeddings:
   ```env
   EMBEDDINGS_MODEL=sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
   ```

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç **—Ç–æ—á–Ω–æ —Å —Ç–µ–º–∏ –∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏**, —á—Ç–æ –ø–æ–∫–∞–∑–∞–ª–∏ –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–µ, **–ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–æ –∏ –±–µ–∑ VPN**!


