# –†–µ–∑—é–º–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### ‚úÖ 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SEMANTIC_K

**–ë—ã–ª–æ:** `SEMANTIC_K=10`  
**–°—Ç–∞–ª–æ:** `SEMANTIC_K=5`

**–ü—Ä–∏—á–∏–Ω–∞:** –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è semantic retrieval - 4-5 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –ë–æ–ª—å—à–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–æ–±–∞–≤–ª—è–µ—Ç —à—É–º –∏ —É—Ö—É–¥—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ.

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –£–ª—É—á—à–µ–Ω–∏–µ `context_precision` (–º–µ–Ω—å—à–µ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
- –£–ª—É—á—à–µ–Ω–∏–µ `context_recall` (–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –ø–æ–∏—Å–∫)
- –£–ª—É—á—à–µ–Ω–∏–µ `answer_correctness` –∏ `answer_similarity`

### ‚úÖ 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ evaluation

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:**
- `EVALUATION_MAX_CONCURRENT=2` (–±—ã–ª–æ 5)
- `EVALUATION_DELAY_BETWEEN_REQUESTS=1.0` (–±—ã–ª–æ 0.3)

**–ü—Ä–∏—á–∏–Ω–∞:** –£–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Groq API –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è rate limits.

**–≠—Ñ—Ñ–µ–∫—Ç:** –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ 429, –Ω–æ evaluation –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–µ–µ.

## –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```env
RAG_MODE=semantic
SEMANTIC_K=5  # ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
EMBEDDINGS_PROVIDER=huggingface
EMBEDDINGS_MODEL=intfloat/multilingual-e5-base
LLM_MODEL=llama-3.1-8b-instant  # Groq
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –£–ª—É—á—à–∏—Ç—å LLM

**–ü—Ä–æ–±–ª–µ–º–∞:** Groq `llama-3.1-8b-instant` –∏–º–µ–µ—Ç –Ω–∏–∑–∫–∏–µ rate limits –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ö—É–∂–µ –ø–æ –∫–∞—á–µ—Å—Ç–≤—É.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OpenRouter –∏–ª–∏ Together AI:

```env
# OpenRouter (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –≤—ã—Å–æ–∫–∏–µ –ª–∏–º–∏—Ç—ã)
OPENAI_BASE_URL=https://openrouter.ai/api/v1
LLM_MODEL=meta-llama/llama-3.1-8b-instruct
RAGAS_LLM_MODEL=meta-llama/llama-3.1-8b-instruct
OPENAI_API_KEY=your_openrouter_key
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –£–ª—É—á—à–∏—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** `intfloat/multilingual-e5-base` –º–æ–∂–µ—Ç –±—ã—Ç—å —Ö—É–∂–µ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Ollama –∏–ª–∏ –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω—É—é –º–æ–¥–µ–ª—å:

```env
# –í–∞—Ä–∏–∞–Ω—Ç 1: Ollama (–ª—É—á—à–µ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ)
EMBEDDINGS_PROVIDER=ollama
EMBEDDINGS_MODEL=aroxima/multilingual-e5-large-instruct:latest

# –í–∞—Ä–∏–∞–Ω—Ç 2: HuggingFace (–±–æ–ª–µ–µ –∫—Ä—É–ø–Ω–∞—è –º–æ–¥–µ–ª—å)
EMBEDDINGS_MODEL=intfloat/multilingual-e5-large  # –≤–º–µ—Å—Ç–æ -base
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `SEMANTIC_K` –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ:

```bash
# –í Telegram –±–æ—Ç–µ
/reindex
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω `SEMANTIC_K=5`
2. ‚è≥ –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. ‚è≥ –ó–∞–ø—É—Å—Ç–∏—Ç—å evaluation —Å–Ω–æ–≤–∞
4. ‚è≥ –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏
5. üîÑ –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –¥–∞–ª—å–Ω–µ–π—à–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ `SEMANTIC_K` –æ–∂–∏–¥–∞–µ—Ç—Å—è:
- `context_precision`: —É–ª—É—á—à–µ–Ω–∏–µ —Å 0.000 –¥–æ ~0.5-0.7
- `context_recall`: —É–ª—É—á—à–µ–Ω–∏–µ —Å 0.167 –¥–æ ~0.5-0.7
- `answer_correctness`: —É–ª—É—á—à–µ–Ω–∏–µ —Å 0.349 –¥–æ ~0.6-0.8
- `answer_similarity`: –Ω–µ–±–æ–ª—å—à–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ —Å 0.774 –¥–æ ~0.8-0.85

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–µ—Ç—Ä–∏–∫–∏ `faithfulness` –∏ `answer_relevancy` –º–æ–≥—É—Ç –æ—Å—Ç–∞—Ç—å—Å—è –Ω–∞ 0.0 –∏–∑-–∑–∞ rate limits Groq, –¥–∞–∂–µ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

