# Настройка LLMost

## О LLMost

LLMost - российский сервис, предоставляющий доступ к LLM моделям через OpenAI-совместимый API. Работает в России без VPN.

**Преимущества:**
- ✅ Работает в России без VPN
- ✅ OpenAI-совместимый API (легкая интеграция)
- ✅ Простая регистрация
- ✅ Есть бесплатный tier

## Регистрация и получение API ключа

### Шаг 1: Откройте сайт LLMost

1. Перейдите на **https://llmost.ru/**
2. Изучите доступные модели и тарифы

### Шаг 2: Регистрация

1. **Найдите кнопку регистрации:**
   - Обычно это "Регистрация", "Sign Up", "Создать аккаунт" или "Войти"
   - Может быть в правом верхнем углу или на главной странице

2. **Заполните форму регистрации:**
   - Укажите email или телефон
   - Придумайте пароль
   - Подтвердите регистрацию (может потребоваться подтверждение email/телефона)

3. **Войдите в аккаунт:**
   - Используйте созданные учетные данные для входа

### Шаг 3: Получение API ключа

1. **Перейдите в личный кабинет:**
   - После входа найдите раздел "API", "API Keys", "Ключи API" или "Настройки API"
   - Может быть в меню профиля или в разделе "Разработчикам"

2. **Создайте API ключ:**
   - Нажмите "Создать ключ", "Generate API Key" или аналогичную кнопку
   - Возможно, потребуется указать название проекта или описание

3. **Сохраните ключ:**
   - ⚠️ **ВАЖНО**: API ключ отображается только один раз при создании
   - Скопируйте ключ и сохраните его в безопасном месте
   - Не делитесь ключом публично

## Настройка в проекте

### 1. Обновите файл `.env`

Добавьте следующие переменные:

```env
# LLMost настройки
LLM_PROVIDER=openai
OPENAI_BASE_URL=https://llmost.ru/api/v1
LLM_MODEL=gpt-4  # или другая доступная модель
OPENAI_API_KEY=your_llmost_api_key_here

# RAGAS LLM (использует те же настройки)
RAGAS_LLM_MODEL=gpt-4
```

**Важно:**
- `LLM_PROVIDER=openai` - используем стандартный OpenAI-совместимый провайдер
- `OPENAI_BASE_URL=https://llmost.ru/api/v1` - endpoint LLMost (правильный URL!)
- `LLM_MODEL` - выберите модель из доступных в LLMost (проверьте на сайте)
- `OPENAI_API_KEY` - ваш API ключ от LLMost

### 2. Доступные модели в LLMost

Проверьте актуальный список моделей на сайте LLMost. Примеры доступных моделей:
- `x-ai/grok-4.1-fast` ⭐ (быстрая модель)
- `gpt-3.5-turbo` (если доступна)
- `gpt-4` (если доступна)
- Другие модели (проверьте точные названия в разделе "Модели" на сайте)

### 3. Проверка работы

#### Тест LLM:

```bash
uv run python scripts/test_llm.py
```

Если все настроено правильно, вы должны увидеть успешный ответ от LLMost.

#### Запуск бота:

```bash
make run
```

Отправьте сообщение боту в Telegram - он должен отвечать через LLMost.

#### Запуск evaluation:

```bash
make reindex-and-evaluate
```

Evaluation будет использовать LLMost для генерации ответов и вычисления метрик.

## Преимущества LLMost

1. **Простая интеграция**: OpenAI-совместимый API означает, что не нужны изменения в коде
2. **Работает в России**: Доступен из России без VPN
3. **Простая регистрация**: Обычно проще, чем в других сервисах
4. **Бесплатный tier**: Есть бесплатный tier с ограничениями

## Известные ограничения

1. **Rate limits**: Могут быть ограничения по количеству запросов в минуту/час
2. **Модели**: Доступность моделей может изменяться - проверяйте актуальный список на сайте
3. **Латентность**: Может быть немного медленнее, чем прямые API провайдеров

## Документация

- Сайт LLMost: https://llmost.ru/
- Документация: https://llmost.ru/docs

## Альтернативы (если LLMost не подходит)

Если LLMost не работает или регистрация недоступна, можно использовать:

### 1. GigaChat (российский, от Сбера)

**Регистрация:**
1. Перейдите на https://developers.sber.ru/gigachat
2. Войдите через Сбер ID
3. Создайте проект и получите Authorization Key

**Настройка в `.env`:**
```env
LLM_PROVIDER=gigachat
OPENAI_API_KEY=your_gigachat_authorization_key_here
LLM_MODEL=GigaChat
RAGAS_LLM_MODEL=GigaChat
```

Подробная инструкция: `docs/gigachat-setup.md`

### 2. Ollama (локально, без регистрации)

**Установка:**
1. Установите Ollama: https://ollama.ai/download
2. Скачайте модель: `ollama pull llama3.1:8b`

**Настройка в `.env`:**
```env
OPENAI_BASE_URL=http://localhost:11434/v1
LLM_MODEL=llama3.1:8b
OPENAI_API_KEY=ollama
LLM_PROVIDER=openai
```

---

## ❓ Проблемы?

Если возникли проблемы:

1. **Проверьте документацию:** https://llmost.ru/docs
2. **Убедитесь, что API ключ правильный**
3. **Проверьте переменные окружения в `.env`**
4. **Проверьте логи** при запуске бота


