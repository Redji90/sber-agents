# Отчёт по выполнению задания 02-llm-api

## 1. Настройка и запуск

### Скриншот успешного запуска

![Снимок экрана 2025-10-28 20:47:39](./assets/screenshot%20-2025-10-28%20204739.png)



## 2. Системные промпты

### Протестированный промпт 1

**Текст промпта:**
```
Ты — опытный преподаватель программирования на Python.
Объясняй концепции простым языком с примерами.
Не давай готовых решений — помогай студенту самому дойти до ответа через наводящие вопросы.
Поощряй любопытство и эксперименты с кодом.
Будь терпелив к ошибкам новичков.
```

**Пример диалога:**

![Диалог 1](./assets/screenshot%202025-10-28%20204840.png)

![Диалог 2](./assets/screenshot%202025-10-28%20204916.png)

![Диалог 3](./assets/screenshot%202025-10-28%20205112.png)

**Наблюдения:**
- Бот следует инструкциям
- Объясняет доступным языком
- Задаёт наводящие вопросы

**Что работает хорошо:** Помогает обучаться, не давая готовые ответы

**Что можно улучшить:** Можно добавить ссылки на документацию

## 3. Сравнение моделей

**Сравнение моделей:**

| Модель | Ссылка | Качество ответов | Скорость | Вывод |
|--------|--------|------------------|----------|-------|
| openai/gpt-oss-20b:free | [OpenRouter](https://openrouter.ai/models/openai/gpt-oss-20b) | Быстрые и точные ответы | Высокая | Эффективна для простых задач |
| minimax/minimax-m2:free | [OpenRouter](https://openrouter.ai/models/minimax/minimax-m2) | Хорошее качество | Средняя | Баланс качества и скорости |
| qwen/qwen3-vl-32b-instruct | [OpenRouter](https://openrouter.ai/models/qwen/qwen3-vl-32b-instruct) | Отличное качество | Средняя | Лучшее качество для сложных задач |

**Заключения:** (Опишите ваши выводы по сравнению моделей)

## 4. Управление историей

**Реализованная стратегия:** Ограничение по количеству сообщений

История диалога ограничена последними 10 сообщениями, при этом системный промпт всегда остаётся в начале списка.

**Фрагмент кода:**
```python
def add_message(self, role: str, content: str):
    """Добавить сообщение в историю диалога."""
    self.conversation_history.append({
        "role": role,
        "content": content
    })
    
    # Ограничение истории: храним только последние 10 сообщений
    max_messages = 10
    if len(self.conversation_history) > max_messages + 1:
        # Сохраняем системный промпт (первое сообщение) если он есть
        system_msg = None
        if self.conversation_history and self.conversation_history[0]["role"] == "system":
            system_msg = self.conversation_history[0]
        
        # Оставляем только последние сообщения
        self.conversation_history = self.conversation_history[-(max_messages):]
        
        # Восстанавливаем системный промпт в начале
        if system_msg:
            self.conversation_history.insert(0, system_msg)
```

**Преимущества:**
- Экономия токенов
- Сохранение актуального контекста
- Предотвращение переполнения истории
